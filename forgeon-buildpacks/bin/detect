#!/usr/bin/env bash
set -euo pipefail

app_dir="${CNB_APP_DIR:-.}"

if [[ -f "$app_dir/bun.lockb" || -f "$app_dir/bun.lock" || -f "$app_dir/bunfig.toml" ]]; then
  exit 0
fi

if [[ -f "$app_dir/package.json" ]] && grep -q '"packageManager"[[:space:]]*:[[:space:]]*"bun@' "$app_dir/package.json"; then
  exit 0
fi

exit 100
